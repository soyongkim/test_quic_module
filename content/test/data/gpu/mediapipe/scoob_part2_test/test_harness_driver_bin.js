(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';function ba(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};
function ca(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var x=ca(this);function y(b,a){if(a)a:{var c=x;b=b.split(".");for(var d=0;d<b.length-1;d++){var e=b[d];if(!(e in c))break a;c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&u(c,b,{configurable:!0,writable:!0,value:a})}}
y("Symbol",function(b){function a(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(e||"")+"_"+d++,e)}function c(e,k){this.g=e;u(this,"description",{configurable:!0,writable:!0,value:k})}if(b)return b;c.prototype.toString=function(){return this.g};var d=0;return a});
y("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<a.length;c++){var d=x[a[c]];"function"===typeof d&&"function"!=typeof d.prototype[b]&&u(d.prototype,b,{configurable:!0,writable:!0,value:function(){return da(ba(this))}})}return b});function da(b){b={next:b};b[Symbol.iterator]=function(){return this};return b}
function G(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):{next:ba(b)}}function ea(b){if(!(b instanceof Array)){b=G(b);for(var a,c=[];!(a=b.next()).done;)c.push(a.value);b=c}return b}var I;if("function"==typeof Object.setPrototypeOf)I=Object.setPrototypeOf;else{var K;a:{var fa={a:!0},ha={};try{ha.__proto__=fa;K=ha.a;break a}catch(b){}K=!1}I=K?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null}
var ia=I;function L(){this.l=!1;this.i=null;this.h=void 0;this.g=1;this.s=this.m=0;this.j=null}function M(b){if(b.l)throw new TypeError("Generator is already running");b.l=!0}L.prototype.o=function(b){this.h=b};function N(b,a){b.j={M:a,N:!0};b.g=b.m||b.s}L.prototype.return=function(b){this.j={return:b};this.g=this.s};function O(b,a,c){b.g=c;return{value:a}}function ja(b){this.g=new L;this.h=b}
function ka(b,a){M(b.g);var c=b.g.i;if(c)return P(b,"return"in c?c["return"]:function(d){return{value:d,done:!0}},a,b.g.return);b.g.return(a);return Q(b)}function P(b,a,c,d){try{var e=a.call(b.g.i,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return b.g.l=!1,e;var k=e.value}catch(f){return b.g.i=null,N(b.g,f),Q(b)}b.g.i=null;d.call(b.g,k);return Q(b)}
function Q(b){for(;b.g.g;)try{var a=b.h(b.g);if(a)return b.g.l=!1,{value:a.value,done:!1}}catch(c){b.g.h=void 0,N(b.g,c)}b.g.l=!1;if(b.g.j){a=b.g.j;b.g.j=null;if(a.N)throw a.M;return{value:a.return,done:!0}}return{value:void 0,done:!0}}
function la(b){this.next=function(a){M(b.g);b.g.i?a=P(b,b.g.i.next,a,b.g.o):(b.g.o(a),a=Q(b));return a};this.throw=function(a){M(b.g);b.g.i?a=P(b,b.g.i["throw"],a,b.g.o):(N(b.g,a),a=Q(b));return a};this.return=function(a){return ka(b,a)};this[Symbol.iterator]=function(){return this}}function R(b,a){a=new la(new ja(a));ia&&b.prototype&&ia(a,b.prototype);return a}
var ma="function"==typeof Object.assign?Object.assign:function(b,a){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b};y("Object.assign",function(b){return b||ma});
y("Promise",function(b){function a(f){this.h=0;this.i=void 0;this.g=[];this.o=!1;var g=this.j();try{f(g.resolve,g.reject)}catch(h){g.reject(h)}}function c(){this.g=null}function d(f){return f instanceof a?f:new a(function(g){g(f)})}if(b)return b;c.prototype.h=function(f){if(null==this.g){this.g=[];var g=this;this.i(function(){g.l()})}this.g.push(f)};var e=x.setTimeout;c.prototype.i=function(f){e(f,0)};c.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var g=0;g<f.length;++g){var h=
f[g];f[g]=null;try{h()}catch(l){this.j(l)}}}this.g=null};c.prototype.j=function(f){this.i(function(){throw f;})};a.prototype.j=function(){function f(l){return function(n){h||(h=!0,l.call(g,n))}}var g=this,h=!1;return{resolve:f(this.C),reject:f(this.l)}};a.prototype.C=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof a)this.J(f);else{a:switch(typeof f){case "object":var g=null!=f;break a;case "function":g=!0;break a;default:g=!1}g?this.B(f):this.m(f)}};
a.prototype.B=function(f){var g=void 0;try{g=f.then}catch(h){this.l(h);return}"function"==typeof g?this.K(g,f):this.m(f)};a.prototype.l=function(f){this.s(2,f)};a.prototype.m=function(f){this.s(1,f)};a.prototype.s=function(f,g){if(0!=this.h)throw Error("Cannot settle("+f+", "+g+"): Promise already settled in state"+this.h);this.h=f;this.i=g;2===this.h&&this.I();this.G()};a.prototype.I=function(){var f=this;e(function(){if(f.H()){var g=x.console;"undefined"!==typeof g&&g.error(f.i)}},1)};a.prototype.H=
function(){if(this.o)return!1;var f=x.CustomEvent,g=x.Event,h=x.dispatchEvent;if("undefined"===typeof h)return!0;"function"===typeof f?f=new f("unhandledrejection",{cancelable:!0}):"function"===typeof g?f=new g("unhandledrejection",{cancelable:!0}):(f=x.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.i;return h(f)};a.prototype.G=function(){if(null!=this.g){for(var f=0;f<this.g.length;++f)k.h(this.g[f]);this.g=null}};var k=new c;a.prototype.J=
function(f){var g=this.j();f.D(g.resolve,g.reject)};a.prototype.K=function(f,g){var h=this.j();try{f.call(g,h.resolve,h.reject)}catch(l){h.reject(l)}};a.prototype.then=function(f,g){function h(q,r){return"function"==typeof q?function(w){try{l(q(w))}catch(p){n(p)}}:r}var l,n,v=new a(function(q,r){l=q;n=r});this.D(h(f,l),h(g,n));return v};a.prototype.catch=function(f){return this.then(void 0,f)};a.prototype.D=function(f,g){function h(){switch(l.h){case 1:f(l.i);break;case 2:g(l.i);break;default:throw Error("Unexpected state: "+
l.h);}}var l=this;null==this.g?k.h(h):this.g.push(h);this.o=!0};a.resolve=d;a.reject=function(f){return new a(function(g,h){h(f)})};a.race=function(f){return new a(function(g,h){for(var l=G(f),n=l.next();!n.done;n=l.next())d(n.value).D(g,h)})};a.all=function(f){var g=G(f),h=g.next();return h.done?d([]):new a(function(l,n){function v(w){return function(p){q[w]=p;r--;0==r&&l(q)}}var q=[],r=0;do q.push(void 0),r++,d(h.value).D(v(q.length-1),n),h=g.next();while(!h.done)})};return a});
function qa(b,a){b instanceof String&&(b+="");var c=0,d=!1,e={next:function(){if(!d&&c<b.length){var k=c++;return{value:a(k,b[k]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}y("Array.prototype.keys",function(b){return b?b:function(){return qa(this,function(a){return a})}});var ra=this||self;
function sa(b,a){b=b.split(".");var c=ra;b[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+b[0]);for(var d;b.length&&(d=b.shift());)b.length||void 0===a?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=a};function S(b,a){var c=void 0;return new (c||(c=Promise))(function(d,e){function k(h){try{g(a.next(h))}catch(l){e(l)}}function f(h){try{g(a["throw"](h))}catch(l){e(l)}}function g(h){h.done?d(h.value):(new c(function(l){l(h.value)})).then(k,f)}g((a=a.apply(b,void 0)).next())})};function ta(b,a,c){c=b.createShader(0===c?b.VERTEX_SHADER:b.FRAGMENT_SHADER);b.shaderSource(c,a);b.compileShader(c);if(!b.getShaderParameter(c,b.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+b.getShaderInfoLog(c));return c};function T(b,a){this.g=b;this.i=a;this.j=0}
T.prototype.A=function(b){var a=this.i;if(void 0===this.l){var c=ta(a,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),d=ta(a,"\n  precision highp float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),e=a.createProgram();a.attachShader(e,c);a.attachShader(e,d);a.linkProgram(e);if(!a.getProgramParameter(e,
a.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+a.getProgramInfoLog(e));c=this.l=e;a.useProgram(c);d=a.getUniformLocation(c,"sampler0");this.h={v:a.getAttribLocation(c,"aVertex"),u:a.getAttribLocation(c,"aTex"),T:d};this.o=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.o);a.enableVertexAttribArray(this.h.v);a.vertexAttribPointer(this.h.v,2,a.FLOAT,!1,0,0);a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,null);this.m=
a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.m);a.enableVertexAttribArray(this.h.u);a.vertexAttribPointer(this.h.u,2,a.FLOAT,!1,0,0);a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,null);a.uniform1i(d,0)}c=this.h;a.useProgram(this.l);a.canvas.width=b.width;a.canvas.height=b.height;a.viewport(0,0,b.width,b.height);a.activeTexture(a.TEXTURE0);this.g.bindTexture2d(b.glName);a.enableVertexAttribArray(c.v);a.bindBuffer(a.ARRAY_BUFFER,this.o);
a.vertexAttribPointer(c.v,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(c.u);a.bindBuffer(a.ARRAY_BUFFER,this.m);a.vertexAttribPointer(c.u,2,a.FLOAT,!1,0,0);a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null);a.drawArrays(a.TRIANGLE_FAN,0,4);a.disableVertexAttribArray(c.v);a.disableVertexAttribArray(c.u);a.bindBuffer(a.ARRAY_BUFFER,null);this.g.bindTexture2d(0)};var ua=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function va(b,a){return a+b}function wa(b,a){window[b]=a}function xa(b){var a=document.createElement("script");a.setAttribute("src",b);a.setAttribute("crossorigin","anonymous");document.body.appendChild(a);return new Promise(function(c){a.addEventListener("load",function(){c()},!1)})}
function U(b){for(var a=[],c=b.size(),d=0;d<c;++d){var e=b.get(d);a.push({x:e.x,y:e.y,z:e.z,visibility:e.hasVisibility?e.visibility:void 0})}return a}function ya(b){for(var a=[],c=b.size(),d=0;d<c;++d){var e=b.get(d);a.push({index:e.index,score:e.score,label:e.hasLabel?e.label:void 0,displayName:e.hasDisplayName?e.displayName:void 0})}return a}function za(b,a,c){this.graph=b;this.locateFile=a;this.g=c}
za.prototype.toArrayBuffer=function(){return S(this,function a(){var c=this,d;return R(a,function(e){return 1==e.g?(c.graph.url?e=O(e,fetch(c.locateFile(c.graph.url,c.g)),3):(e.g=2,e=void 0),e):2!=e.g&&(d=e.h,d.body)?e.return(d.arrayBuffer()):e.return(new ArrayBuffer(0))})})};
function Aa(){return S(this,function a(){return R(a,function(c){switch(c.g){case 1:return c.m=2,O(c,WebAssembly.instantiate(ua),4);case 4:c.g=3;c.m=0;break;case 2:return c.m=0,c.j=null,c.return(!1);case 3:return c.return(!0)}})})}
function V(b){this.h=b;this.listeners={};this.G={};this.j={};this.H=this.B=!0;this.o=Promise.resolve();this.locateFile=b&&b.locateFile||va;if("object"===typeof window)b=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if("undefined"!==typeof location)b=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");this.s=b}
V.prototype.close=function(){this.i&&this.i.delete();return Promise.resolve()};
function Ba(b){return S(b,function c(){var d=this,e,k,f,g,h,l,n,v,q;return R(c,function(r){switch(r.g){case 1:e=d;if(!d.B)return r.return();wa("createMediapipeSolutionsWasm",{locateFile:d.locateFile});wa("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile});k=d.h.files||[];return O(r,Aa(),2);case 2:return f=r.h,O(r,Promise.all(k.map(function(w){return void 0===w.simd||w.simd&&f||!w.simd&&!f?xa(e.locateFile(w.url,e.s)):Promise.resolve()})),3);case 3:return g=window.createMediapipeSolutionsWasm,
h=window.createMediapipeSolutionsPackedAssets,O(r,g(h),4);case 4:return d.g=r.h,d.m=document.createElement("canvas"),d.g.canvas=d.m,d.g.createContext(d.m,!0,!0,{}),d.i=new d.g.SolutionWasm,l=new za(d.h.graph,d.locateFile,d.s),O(r,d.loadGraph(l),5);case 5:if(d.h.listeners)for(n=G(d.h.listeners),v=n.next();!v.done;v=n.next())q=v.value,Ca(d,q);d.B=!1;r.g=0}})})}
function Da(b){return S(b,function c(){var d=this,e,k,f,g,h;return R(c,function(l){if(!d.H)return l.return();e=d.m.getContext("webgl2");if(!e)return alert("Failed to create WebGL canvas context when passing video frame."),l.return();d.l=e;if(d.C){k=new d.g.GraphOptionChangeRequestList;f=G(d.C);for(g=f.next();!g.done;g=f.next())h=g.value,k.push_back(h);d.i.changeOptions(k);k.delete();d.C=void 0}d.H=!1;l.g=0})})}
function Ea(b){return S(b,function c(){var d=this;return R(c,function(e){return 1==e.g?O(e,Ba(d),2):O(e,Da(d),0)})})}V.prototype.loadGraph=function(b){return S(this,function c(){var d,e=this;return R(c,function(k){if(1==k.g)return O(k,b.toArrayBuffer(),2);d=k.h;e.i.loadGraph(d);k.g=0})})};
V.prototype.send=function(b,a){return S(this,function d(){var e=this,k,f,g,h,l,n,v,q;return R(d,function(r){if(1==r.g){if(!e.h.inputs)return r.return();k=1E3*(a||performance.now());return O(r,e.o,2)}if(3!=r.g)return O(r,Ea(e),3);f=new e.g.PacketDataList;g=G(Object.keys(b));for(h=g.next();!h.done;h=g.next())if(l=h.value,n=e.h.inputs[l]){a:{var w=b[l];switch(n.type){case "video":var p=e.G[n.stream];p||(p=new T(e.g,e.l),e.G[n.stream]=p);0===p.j&&(p.j=p.g.createTexture());if(w instanceof HTMLVideoElement){var m=
w.videoWidth;var C=w.videoHeight}else w instanceof HTMLImageElement?(m=w.naturalWidth,C=w.naturalHeight):(m=w.width,C=w.height);C={glName:p.j,width:m,height:C};m=p.i;m.canvas.width=C.width;m.canvas.height=C.height;m.activeTexture(m.TEXTURE0);p.g.bindTexture2d(p.j);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,w);p.g.bindTexture2d(0);p=C;break a;default:p={}}}v=p;q=n.stream;f.pushTexture2d(Object.assign(Object.assign({},v),{stream:q,timestamp:k}))}e.i.send(f);f.delete();r.g=0})})};
function Fa(b,a,c){if(c.isNumber())return c.getNumber();if(c.isRect())return c.getRect();if(c.isLandmarks())return c.getLandmarks();if(c.isLandmarksList())return c.getLandmarksList();if(c.isClassificationsList())return c.getClassificationsList();if(c.isObjectDetectionList())return c.getObjectDetectionList();if(c.isTexture2d()){var d=b.j[a];d||(d=new T(b.g,b.l),b.j[a]=d);b=d;c=c.getTexture2d();b.A(c);return b.i.canvas}}
function Ca(b,a){for(var c=a.name||"$",d=[].concat(ea(a.wants)),e=new b.g.StringList,k=G(a.wants),f=k.next();!f.done;f=k.next())e.push_back(f.value);k=b.g.PacketListener.implement({onResults:function(g){return S(b,function l(){var n,v,q=this,r,w,p;return R(l,function(m){if(1==m.g){n={};for(v=0;v<a.wants.length;++v)n[d[v]]=g.get(v);var C;if(C=a.outs){for(var H={},na=G(Object.keys(C)),A=na.next();!A.done;A=na.next()){A=A.value;var F=C[A];if("string"===typeof F)H[A]=Fa(q,A,n[F]);else{var z=n[F.stream];
if(void 0!==z){if("detection_list"===F.type){var t=z.getRectList(),D=z.getLandmarksList();z=z.getClassificationsList();var B=[];if(t)for(var E=0;E<t.size();++E){var Y={O:t.get(E),S:U(D.get(E)),P:ya(z.get(E))};B.push(Y)}H[A]=B}else if("landmarks"===F.type)t=z.getLandmarks(),H[A]=t?U(t):void 0;else if("landmarks_list"===F.type){if(t=z.getLandmarksList()){D=[];z=t.size();for(B=0;B<z;++B)E=t.get(B),D.push(U(E));t=D}else t=void 0;H[A]=t}else if("rect_list"===F.type){if(t=z.getRectList()){D=[];z=t.size();
for(B=0;B<z;++B)E=t.get(B),D.push(E);t=D}else t=void 0;H[A]=t}else if("classifications_list"===F.type){if(t=z.getClassificationsList()){D=[];z=t.size();for(B=0;B<z;++B)E=t.get(B),D.push(ya(E));t=D}else t=void 0;H[A]=t}else if("object_detection_list"===F.type){if(t=z.getObjectDetectionList()){D=[];z=t.size();for(B=0;B<z;++B){var Z=t.get(B);E=D;Y=E.push;for(var Ka=Z.id,oa=Z.keypoints,pa=[],La=oa.size(),aa=0;aa<La;++aa){var J=oa.get(aa);pa.push({id:J.id,point3d:{x:J.point3d.x,y:J.point3d.y,z:J.point3d.z},
point2d:{x:J.point2d.x,y:J.point2d.y,depth:J.point2d.depth}})}Y.call(E,{id:Ka,keypoints:pa,visibility:Z.visibility})}t=D}else t=void 0;H[A]=t}else if("texture"===F.type)t=q.j[A],t||(t=new T(q.g,q.l),q.j[A]=t),D=z.getTexture2d(),t.A(D),H[A]=t.i.canvas;else throw Error("Unknown output config type: '"+F.type+"'");F.transform&&H[A]&&(H[A]=F.transform(H[A]))}}}C=H}else C=n;r=C;(w=q.listeners[c])?m=O(m,q.o,3):(m.g=0,m=void 0);return m}if(p=w(r))return q.o=p,m.return(p);m.g=0})})}});b.i.attachMultiListener(e,
k);e.delete()}V.prototype.onResults=function(b,a){this.listeners[a||"$"]=b};sa("Solution",V);sa("OptionType",{NUMBER:0,BOOL:1,0:"NUMBER",1:"BOOL"});function Ga(){var b=this;return new Promise(function(a){setTimeout(function(){return S(b,function d(){return R(d,function(e){a();e.g=0})})},0)})}function W(b){this.g=new V(b)}W.prototype.close=function(){this.g.close();return Promise.resolve()};function Ha(b){return S(b,function c(){var d=this;return R(c,function(e){return 1==e.g?O(e,Ea(d.g),2):e.return(d)})})}W.prototype.send=function(b){return S(this,function c(){var d=this;return R(c,function(e){return O(e,d.g.send(b),0)})})};
W.prototype.onResults=function(b){this.g.onResults(b)};function X(b){return b instanceof Object?JSON.stringify(b):""+b}function Ia(b,a){var c=document.createElement("canvas"),d=c.getContext("2d");b.width=c.width=a.width;b.height=c.height=a.height;d.clearRect(0,0,a.width,a.height);d.drawImage(a,0,0,a.width,a.height);return new Promise(function(e){b.onload=function(){e()};b.src=c.toDataURL()})}
function Ja(b){var a=document.createElement("canvas");a.width=b.width;a.height=b.height;var c=a.getContext("2d");c.drawImage(b,0,0,b.width,b.height);return c.getImageData(0,0,a.width,a.height)}
function Ma(b,a,c,d){return new Promise(function(e){a.width===c.width&&a.height===c.height||e("Image on stream "+b+": Dimensions don't match. FOUND: "+a.width+"x"+a.height+", EXPECTED: "+c.width+"x"+c.height);for(var k=Ja(a).data,f=Ja(c).data,g=0,h=0;h<k.length/4;h++)g+=Math.abs(k[4*h]-f[4*h])/255,g+=Math.abs(k[4*h+1]-f[4*h+1])/255,g+=Math.abs(k[4*h+2]-f[4*h+2])/255;k=100*g/(a.width*a.height*3);k>d&&e("Image on stream "+b+": Failed within a tolerance of "+d+" (was "+k+").");e(void 0)})}
function Na(b,a){var c=document.createElement("div");c.classList.add("stream");c.textContent="Stream: "+b.name;a.appendChild(c)}
function Oa(b,a){var c=this;Na(b,a);var d=b.element=document.createElement("img");d.classList.add(b.name);a.appendChild(d);b.F=function(){return b.element};b.A=function(k){return S(c,function g(){return R(g,function(h){return O(h,Ia(d,k),0)})})};b.validate=function(k){return S(c,function g(){return R(g,function(h){return h.return(Ma(b.name,b.element,k.element,k.tolerance||0))})})};var e=b.src;return e?new Promise(function(k){d.onload=function(){return S(c,function g(){return R(g,function(h){k();h.g=
0})})};d.onerror=function(){throw Error("Image "+e+" did not load correctly.");};d.src=e}):Promise.resolve()}
function Pa(b,a){return S(this,function d(){var e=this,k,f,g;return R(d,function(h){switch(h.g){case 1:k=e;Na(b,a);f=b.element=document.createElement("div");b.F=function(){if(f.textContent)return JSON.parse(f.textContent).data};b.A=function(l){return S(k,function v(){var q;return R(v,function(r){q={data:l};f.textContent=JSON.stringify(q);r.g=0})})};b.validate=function(l){var n=b.F(),v=l.F();return l.dataPattern?(new RegExp(l.dataPattern)).test(X(n))?Promise.resolve(void 0):Promise.resolve("Object on stream "+
b.name+" failed pattern "+l.dataPattern+". FOUND: "+X(n)):n===v?Promise.resolve(void 0):Promise.resolve("Object on stream "+b.name+" failed. FOUND: "+X(n)+", EXPECTED: "+X(v))};f.classList.add(b.name);if(!b.L){b.R?f.textContent=JSON.stringify({data:b.data}):b.data&&(f.textContent=JSON.stringify({data:b.data}));h.g=2;break}g=f;return O(h,fetch(b.L),4);case 4:return O(h,h.h.text(),3);case 3:g.textContent=h.h;case 2:return a.appendChild(f),h.return(Promise.resolve())}})})}
function Qa(b,a){return S(this,function d(){var e,k,f;return R(d,function(g){1==g.g&&(e=G(b),k=e.next());if(3!=g.g){if(k.done){g.g=0;return}f=k.value;return"video"===f.type?O(g,Oa(f,a),3):O(g,Pa(f,a),3)}k=e.next();g.g=2})})}
function Ra(b,a,c){S(b,function e(){var k,f,g,h,l,n,v,q,r,w=this;return R(e,function(p){switch(p.g){case 1:k=[],f=G(c.test.outputs),g=f.next();case 2:if(g.done){p.g=4;break}h=g.value;l=h.name;return O(p,h.A(a[l]),5);case 5:n=G(c.test.expects),v=n.next();case 6:if(v.done){p.g=3;break}q=v.value;if(q.name!==l){p.g=7;break}return O(p,h.validate(q),10);case 10:(r=p.h)&&k.push(r);p.g=3;break;case 7:v=n.next();p.g=6;break;case 3:g=f.next();p.g=2;break;case 4:w.h.textContent=k.join("\n"),w.l.textContent=
"COMPLETE",p.g=0}})})}
function Sa(b,a){S(b,function d(){var e=this,k,f,g,h,l,n,v,q,r,w,p;return R(d,function(m){switch(m.g){case 1:k=e;if(!a.solutionUrl){m.g=2;break}return O(m,fetch(a.solutionUrl),4);case 4:return O(m,m.h.json(),3);case 3:f=m.h,a.solution=f;case 2:if(!a.testUrl){m.g=5;break}return O(m,fetch(a.testUrl),7);case 7:return O(m,m.h.json(),6);case 6:g=m.h,a.test=g;case 5:return a.binarypb&&(a.solution.graph={url:a.binarypb}),h=a.name,a.solution.files=a.solution.files||[],a.solution.files=[].concat(ea(a.solution.files),
[{url:h+"_web_solution_packed_assets_loader.js"},{simd:!1,url:h+"_web_solution_wasm_bin.js"},{simd:!0,url:h+"_web_solution_simd_wasm_bin.js"}]),O(m,Ha(new W(a.solution)),8);case 8:return l=m.h,O(m,Qa(a.test.inputs,e.inputs),9);case 9:return O(m,Qa(a.test.expects,e.i),10);case 10:return O(m,Qa(a.test.outputs,e.g),11);case 11:return O(m,Ga(),12);case 12:n={};v=G(a.test.inputs);for(q=v.next();!q.done;q=v.next())r=q.value,n[r.name]=r.F();e.o.textContent="COMPLETE";if(!a.test.options||!a.test.options.warmup){m.g=
13;break}w=a.test.options.warmup;p=0;case 14:if(!(p<w)){m.g=13;break}return O(m,l.send(n),15);case 15:p++;m.g=14;break;case 13:return l.onResults(function(C){Ra(k,C,a)}),O(m,l.send(n),0)}})})};S(new function(){},function Ta(){var a=this,c;return R(Ta,function(d){c=a;a.m=document.querySelector(".test");a.j=document.querySelector(".run-test");a.l=document.querySelector(".test-complete");a.h=document.querySelector(".errors");a.o=document.querySelector(".test-ready");a.g=document.querySelector(".outputs");a.i=document.querySelector(".expects");a.inputs=document.querySelector(".inputs");a.j.onclick=function(){Sa(c,JSON.parse(c.m.value))};return O(d,Ga(),0)})});}).call(this);
